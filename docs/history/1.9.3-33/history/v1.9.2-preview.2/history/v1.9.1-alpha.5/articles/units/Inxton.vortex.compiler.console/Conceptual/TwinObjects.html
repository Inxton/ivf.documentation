<!DOCTYPE html>
<!--[if IE]><![endif]-->
<html>
  
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <title>Twin objects </title>
    <meta name="viewport" content="width=device-width">
    <meta name="title" content="Twin objects ">
    <meta name="generator" content="docfx 2.56.5.0">
    
    <link rel="shortcut icon" href="../../../../favicon.png">
    <link rel="stylesheet" href="../../../../styles/docfx.vendor.css">
    <link rel="stylesheet" href="../../../../styles/docfx.css">
    <link rel="stylesheet" href="../../../../styles/main.css">
    <meta property="docfx:navrel" content="../../../../toc">
    <meta property="docfx:tocrel" content="../../../../docu/articles/toc">
    
    
    
  </head>
  <body data-spy="scroll" data-target="#affix" data-offset="120">
    <div id="wrapper">
      <header>
        
        <nav id="autocollapse" class="navbar navbar-inverse ng-scope" role="navigation">
          <div class="container">
            <div class="navbar-header">
              <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#navbar">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
              </button>
              
              <a class="navbar-brand" href="../../../../index.html">
                <svg id="logo" class="svg" width="132px" height="26px" viewbox="0 0 132 26"><path d="M10.8.1L27.3 14V.5h5.9v25.6h-.7L16 11.7v13.9h-5.9v-10L12 13l-1.8-2.5V.1h.6zM50.5 13l8.7 12.9h-6.8l-5.3-8.2 3.4-4.7zM91.7.2c7.5 0 13.5 5.3 13.5 12.9s-6.1 12.8-13.5 12.8c-5.1 0-9.5-2.6-11.8-6.7l4.3-6.2-4.3-6.3c2.3-4 6.7-6.5 11.8-6.5zm17.2-.1L125.4 14V.5h5.9v25.6h-.7l-16.4-14.3v13.9h-5.9v-8.2l3.1-4.4-3.1-4.5V.1h.6zm-31 .6v3.1l-.1-.1V6h-6.2v19.5h-5.9V6h-6.3V.7h18.5zM5.5.1v25H0V.1h5.5zm37.2 0l1.7 2.7v18.9L42.2 25h-6.1l8.3-12.5-8-12.4h6.3zm49 5.6c-4.1 0-7.4 2.9-7.4 7.4s3.3 7.4 7.4 7.4c4 0 7.4-2.9 7.4-7.4-.1-4.4-3.4-7.4-7.4-7.4zM58.3.1l-8 12-3.1-4.6L52 0h6.3v.1z"></path></svg>
              </a>
            </div>
            <div class="collapse navbar-collapse" id="navbar">
              <form class="navbar-form navbar-right" role="search" id="search">
                <div class="form-group">
                  <input type="text" class="form-control" id="search-query" placeholder="Search" autocomplete="off">
                </div>
              </form>
                
                <ul class="nav level1 navbar-nav">
                      <li>
                          <a href="../../../../articles/intro.html" title="Articles">Articles</a>
                      </li>
                      <li>
                          <a href="../../../../api/index.html" title="API reference">API reference</a>
                      </li>
                      <li>
                          <a href="../../../../docu/previous_versions/index.html" title="Previous Versions">Previous Versions</a>
                      </li>
                </ul>    </div>
          </div>
        </nav>
        
        <div class="subnav navbar navbar-default">
          <div class="container hide-when-search" id="breadcrumb">
            <ul class="breadcrumb">
              <li></li>
            </ul>
          </div>
        </div>
      </header>
      <div role="main" class="container body-content hide-when-search">
        <div class="sidenav hide-when-search">
          <a class="btn toc-toggle collapse" data-toggle="collapse" href="#sidetoggle" aria-expanded="false" aria-controls="sidetoggle">Show / Hide Table of Contents</a>
          <div class="sidetoggle collapse" id="sidetoggle">
            <div>
              <div class="sidefilter">
                <form class="toc-filter">
                  <span class="glyphicon glyphicon-filter filter-icon"></span>
                  <input type="text" id="toc_filter_input" placeholder="Enter here to filter..." onkeypress="if(event.keyCode==13) {return false;}">
                </form>
              </div>
              <div class="sidetoc">
                <div class="toc" id="toc">
                  
                  <ul class="nav level1">
                    <li class="">
                      <a href="../../../../docu/articles/../../articles/intro.html" title="Introduction" class="">Introduction</a>
                    </li>
                    <li class="">
                      <span class="expand-stub"></span>
                      <a class="">How to</a>
                        
                        <ul class="nav level2">
                          <li class="">
                            <a href="../../../../docu/articles/../../articles/howtos/recipes/recipes.html" title="Implement recipe management" class="">Implement recipe management</a>
                          </li>
                          <li class="">
                            <a href="../../../../docu/articles/../../articles/howtos/influxdb/influxdb.html" title="Connect to a influx database" class="">Connect to a influx database</a>
                          </li>
                          <li class="">
                            <a href="../../../../docu/articles/../../articles/howtos/invoke_csharp/invoke_csharp.html" title="Invoke C# from PLC" class="">Invoke C# from PLC</a>
                          </li>
                          <li class="">
                            <a href="../../../../docu/articles/../../articles/howtos/diag/diag.html" title="Use diagnostics tools" class="">Use diagnostics tools</a>
                          </li>
                        </ul>  </li>
                    <li class="">
                      <span class="expand-stub"></span>
                      <a class="">Core</a>
                        
                        <ul class="nav level2">
                          <li class="">
                            <a href="../../../../docu/articles/01core/getting_started/getting_started.html" title="Introduction" class="">Introduction</a>
                          </li>
                          <li class="">
                            <span class="expand-stub"></span>
                            <a class="">Compiler</a>
                              
                              <ul class="nav level3">
                                <li class="">
                                  <a href="../../../../docu/articles/../../articles/units/Inxton.vortex.compiler.console/README.html" title="Intro to compiler" class="">Intro to compiler</a>
                                </li>
                                <li class="">
                                  <a href="../../../../docu/articles/../../articles/units/Inxton.vortex.compiler.console/Conceptual/AddedProperties.html" title="Added Properties" class="">Added Properties</a>
                                </li>
                                <li class="">
                                  <a href="../../../../docu/articles/../../articles/units/Inxton.vortex.compiler.console/Conceptual/Attributes.html" title="Attributes" class="">Attributes</a>
                                </li>
                                <li class="">
                                  <a href="../../../../docu/articles/../../articles/units/Inxton.vortex.compiler.console/Conceptual/DocumentationBlock.html" title="Documentation Block" class="">Documentation Block</a>
                                </li>
                                <li class="">
                                  <a href="../../../../docu/articles/../../articles/units/Inxton.vortex.compiler.console/Conceptual/FakeComments.html" title="Fake Comments" class="">Fake Comments</a>
                                </li>
                                <li class="">
                                  <a href="../../../../docu/articles/../../articles/units/Inxton.vortex.compiler.console/Conceptual/IgnoringPartsOfCode.html" title="Ignoring Parts Of Code" class="">Ignoring Parts Of Code</a>
                                </li>
                                <li class="">
                                  <a href="../../../../docu/articles/../../articles/units/Inxton.vortex.compiler.console/Conceptual/TwinController.html" title="Twin Controller" class="">Twin Controller</a>
                                </li>
                                <li class="">
                                  <a href="../../../../docu/articles/../../articles/units/Inxton.vortex.compiler.console/Conceptual/TwinObjects.html" title="Twin Objects" class="">Twin Objects</a>
                                </li>
                                <li class="">
                                  <a href="../../../../docu/articles/../../articles/units/Inxton.vortex.compiler.console/Conceptual/Twins.html" title="Twins" class="">Twins</a>
                                </li>
                              </ul>  </li>
                          <li class="">
                            <span class="expand-stub"></span>
                            <a class="">Connector</a>
                              
                              <ul class="nav level3">
                                <li class="">
                                  <a href="../../../../docu/articles/../../articles/units/Inxton.Vortex.Connector/README.html" title="About connector" class="">About connector</a>
                                </li>
                                <li class="">
                                  <a href="../../../../docu/articles/../../articles/units/Inxton.Vortex.Connector/Conceptual/PrimitiveTwins.html" title="Primitive Twins" class="">Primitive Twins</a>
                                </li>
                              </ul>  </li>
                        </ul>  </li>
                    <li class="">
                      <span class="expand-stub"></span>
                      <a class="">Essentials</a>
                        
                        <ul class="nav level2">
                          <li class="">
                            <a href="../../../../docu/articles/02essentials/getting_started/getting_started.html" title="Introduction" class="">Introduction</a>
                          </li>
                          <li class="">
                            <span class="expand-stub"></span>
                            <a class="">Rendering engine</a>
                              
                              <ul class="nav level3">
                                <li class="">
                                  <a href="../../../../docu/articles/../../articles/units/Inxton.Vortex.Presentation.Wpf/README.html" title="Generating user interface" class="">Generating user interface</a>
                                </li>
                                <li class="">
                                  <a href="../../../../docu/articles/../../articles/units/Inxton.Vortex.Presentation.Wpf/how_it_works.html" title="How it works" class="">How it works</a>
                                </li>
                                <li class="">
                                  <a href="../../../../docu/articles/../../articles/units/Inxton.Vortex.Presentation.Wpf/presentation_types.html" title="Presentation types" class="">Presentation types</a>
                                </li>
                              </ul>  </li>
                          <li class="">
                            <span class="expand-stub"></span>
                            <a class="">Controls</a>
                              
                              <ul class="nav level3">
                                <li class="">
                                  <a href="../../../../docu/articles/../../articles/units/Inxton.Vortex.Presentation.Controls.Wpf/README.html" title="Controls" class="">Controls</a>
                                </li>
                              </ul>  </li>
                          <li class="">
                            <span class="expand-stub"></span>
                            <a class="">Styling your app</a>
                              
                              <ul class="nav level3">
                                <li class="">
                                  <a href="../../../../docu/articles/../../articles/units/Inxton.Vortex.Presentation.Styling.Wpf/README.html" title="Styling your application" class="">Styling your application</a>
                                </li>
                                <li class="">
                                  <a href="../../../../docu/articles/../../articles/units/Inxton.Vortex.Presentation.Styling.Wpf/color_system.html" title="Color system" class="">Color system</a>
                                </li>
                                <li class="">
                                  <a href="../../../../docu/articles/../../articles/units/Inxton.Vortex.Presentation.Styling.Wpf/how_to_apply_styles.html" title="How to apply styles" class="">How to apply styles</a>
                                </li>
                                <li class="">
                                  <a href="../../../../docu/articles/../../articles/units/Inxton.Vortex.Presentation.Styling.Wpf/override_color.html" title="Override default colors" class="">Override default colors</a>
                                </li>
                                <li class="">
                                  <a href="../../../../docu/articles/../../articles/units/Inxton.Vortex.Presentation.Styling.Wpf/buttons.html" title="Buttons" class="">Buttons</a>
                                </li>
                              </ul>  </li>
                        </ul>  </li>
                    <li class="">
                      <span class="expand-stub"></span>
                      <a class="">Advanced</a>
                        
                        <ul class="nav level2">
                          <li class="">
                            <a href="../../../../docu/articles/../../articles/03advanced/getting_started/getting_started.html" title="Introduction" class="">Introduction</a>
                          </li>
                        </ul>  </li>
                  </ul>        </div>
              </div>
            </div>
          </div>
        </div>
        <div class="article row grid-right">
          <div class="col-md-10">
            <article class="content wrap" id="_content" data-uid="">
<h1 id="twin-objects">Twin objects</h1>

<p><img src="../../../../assets/articles/units/Inxton.vortex.compiler.console/assets/tc3-inxton-app.png" alt="tc3toInxton"></p>
<p>Twin object is .net representation of a complex PLC data type (STRUCT, UNION, FB, GVL, PRG). Each of these data structures is represented by a separate class of which name is the same as the name of the respective structure.</p>
<p>Each twin object implements two types of interfaces  <em>IOnline</em> interface which exposes members with direct communication ability with the PLC system and IShadow interface with allows for an offline manipulation of object's data.</p>
<p>There is a separate class <em>Plainer</em> that is produced during the trans-piling process which is light (POCO like) representation of the same data structure, that can be is used in scenarios involving serialization.</p>
<h2 id="compiler">Compiler</h2>
<p><img src="../../../../assets/articles/units/Inxton.vortex.compiler.console/assets/TwinObjectDetail.png" alt="tc3toInxton">
Compiler supports PLC program structures of following POU types:</p>
<ul>
<li><a href="https://infosys.beckhoff.com/english.php?content=../content/1033/tc3_plc_intro/9007201785015179.html&amp;id=930767890005286929">PROGRAM (PRG)</a></li>
<li><a href="https://infosys.beckhoff.com/english.php?content=../content/1033/tf1910_tc3_uml/36028798529893003.html&amp;id=2773021788155373267">GLOBAL VARIABLE TABLE (GVL)</a></li>
<li><a href="https://infosys.beckhoff.com/english.php?content=../content/1033/tcplccontrol/html/tcplcctrl_struct.htm&amp;id=5127776672336114982">STRUCTURE (STRUCT)</a></li>
<li><a href="https://infosys.beckhoff.com/english.php?content=../content/1033/tcplccontrol/html/tcplcctrl_enum.htm&amp;id=4424143096508421991">ENUMERATION (ENUM)</a></li>
<li><a href="https://infosys.beckhoff.com/english.php?content=../content/1033/tc3_plc_intro/27021600294502539-2.html&amp;id=186805786802053213">FUNCTION BLOCK (FB)</a></li>
<li><a href="https://infosys.beckhoff.com/english.php?content=../content/1033/tc3_plc_intro/18014401038903179.html&amp;id=7589402540002750925">UNION BLOCK (UNION)</a></li>
</ul>
<p>Each of the mentioned is constructed and represented inside Inxton as several partial <em>Classes</em> plus corresponding <em>interfaces</em>. Please find more details in the sections below.</p>
<p>More about TwinCAT 3 data types can be found <a href="https://infosys.beckhoff.com/english.php?content=../content/1033/tc3_plc_intro/126100792095762827.html&amp;id=6124705676148460443">here</a>.</p>
<blockquote>
<p><strong style="color:orange">NOTE</strong>: <span style="color:orange">FUNCTION (FUN) are not compiled as the data of function block are temporary.</span></p>
</blockquote>
<p>The compiler supports Members of POU declared in sections as well:</p>
<ul>
<li>VAR</li>
<li>VAR_INPUT</li>
<li>VAR_OUTPUT</li>
</ul>
<p>Read more about the nature of TwinCAT 3 variable types and special variables is available <a href="https://infosys.beckhoff.com/english.php?content=../content/1033/tc3_plc_intro/72057596566677643.html&amp;id=2442682616783122800">here</a>.</p>
<blockquote>
<p><strong style="color:orange">NOTE</strong>: <span style="color:orange">Sections VAR_IN_OUT, VAR_STAT, VAR_TEMP are not supported at this time. It should be also noted that variables declared in declaration sections of Methods and Functions are also not supported as they represent temporary variables. Variable in declaration sections of methods are not compiled even when declared within VAR_INST section.</span></p>
</blockquote>
<h2 id="object-approach-and-naming-convention">Object approach and naming convention</h2>
<p>During the process of compilation, several partial classes and interfaces are being created. Each of the objects serves a specific purpose and its members are with a different relationship to PLC object.
Having a Function block named FbPiston created at PLC side. The result of the compiler's effort is Onliner and Plain classes plus Online and Shadow interfaces. Please carefully analyze the sample below.</p>
<p><img src="../../../../assets/articles/units/Inxton.vortex.compiler.console/assets/onliner-shadow-plain.png" alt="TwinObjectDetail"></p>
<p><strong>PLC code:</strong></p>
<pre><code class="lang-PASCAL">FUNCTION_BLOCK fbPiston ...
</code></pre>
<p><strong>Inxton representation follows:</strong></p>
<p><strong>Onliner</strong> partial class</p>
<p><em>Onliner</em> is having a name identical to POU's name.</p>
<pre><code class="lang-C#">public partial class fbPiston ...
</code></pre>
<p><strong>IOnline</strong> interface</p>
<p><em>IOnline</em> will prefix the POU's name with the 'I'.</p>
<pre><code class="lang-C#">public interface IfbPiston...
</code></pre>
<p><strong>IShadow</strong> interface</p>
<p><em>IShadow</em> will prefix the POU's name with 'IShadow' prefix.</p>
<pre><code class="lang-C#">public interface IShadowfbPiston ...
</code></pre>
<p><strong>Plain</strong> objects</p>
<p>Vortex.Compiler trans-piles also light POCO like objects that represent each PLC block. These objects are typically used in serialization scenarios. The Plain object is POU's name prefixed with 'Plain'.</p>
<pre><code class="lang-C#">public partial class PlainfbShadow
</code></pre>
<h2 id="useful-methods-of-twinobjects">Useful methods of TwinObjects</h2>
<h3 id="reading-entire-structure-or-read-or-readstructure-methods">Reading entire structure or Read() or ReadStructure() methods</h3>
<p>Reads all variables (Primitive Twins) contained in this structure (TwinObject) and its children. The variable read from the controller is stored in <em>LastValue</em> property of Primitive Twin(s).</p>
<pre><code class="lang-C#">MainPlc.MAIN.DataStructure.Read();
</code></pre>
<h3 id="writing-entire-structure-or-write-or-writestructure-methods">Writing entire structure or Write() or WriteStructure() methods</h3>
<p>Reads all variables (Primitive Twins) contained in this structure (TwinObject) and its children. The variable read from the controller is stored in <em>LastValue</em> property of Primitive Twin(s).</p>
<pre><code class="lang-C#">MainPlc.MAIN.DataStructure.Write();
</code></pre>
<h2 id="shuffling-data-between-online-shadow-plain">Shuffling data between Online, Shadow, Plain</h2>
<h3 id="online-plc-and-shadow">Online (PLC) and Shadow</h3>
<p>You can store the data into shadow holders of Primitive twin. Shadow values can temporally hold the value that can be transferred from Online to shadow in a single shot by calling 'FlushOnlineToShadow()' method. Inversely you can transfer the data from Shadow holder to Online by calling 'FlushShadowToOnline()' method.</p>
<pre><code class="lang-C#">MainPlc.MAIN.DataStructure.FlushOnlineToShadow();
</code></pre>
<pre><code class="lang-C#">MainPlc.MAIN.DataStructure.FlushShadowToOnline();
</code></pre>
<h3 id="working-with-plain-types">Working with 'Plain' types</h3>
<p>You can create an instance of a plain object by invoking 'CreatePlainerType()' method. This will create a fresh instance of 'Plainer' type. To populate the newly created instance with online data you can invoke 'FlushOnlineToPlain()' inversely when you want to copy the data from 'Plainer' to Online variables you can call 'FlushOnlineToPlain()' method.</p>
<pre><code class="lang-C#">// Creates an empty instance of 'Plain' for 'DataStructure' type.
var plainDataStructure = MainPlc.MAIN.DataStructure.CreatePlainerType();

// Copies current online data into 'plainDataStructureObject'
MainPlc.MAIN.DataStructure.FlushOnlineToPlain(plainDataStructure);
</code></pre>
<p>In analogous way you can swap data between 'Shadow' holder using 'CopyPlainToShadow()' and 'CopyShadowToPlain()' on plainer type.</p>
<pre><code class="lang-C#">// Creates an empty instance of 'Plain' for 'DataStructure' type.
var plainDataStructure = MainPlc.MAIN.DataStructure.CreatePlainerType();

// Copy shadow data to plainer type.
plainDataStructure.CopyShadowToPlain(MainPlc.MAIN.DataStructure);

// Modif. plainer data.
plainDataStructure.Count++;
plainDataStructure.TimeStamp = DateTime.Now();

// Copy plainer back to Shadow.
plainDataStructure.CopyPlainToShadow(MainPlc.MAIN.DataStructure);
</code></pre>
</article>
          </div>
          
          <div class="hidden-sm col-md-2" role="complementary">
            <div class="sideaffix">
              <div class="contribution">
                <ul class="nav">
                </ul>
              </div>
              <nav class="bs-docs-sidebar hidden-print hidden-xs hidden-sm affix" id="affix">
                <h5>In This Article</h5>
                <div></div>
              </nav>
            </div>
          </div>
        </div>
      </div>
      
      <footer>
        <div class="grad-bottom"></div>
        <div class="footer">
          <div class="container">
            <span class="pull-right">
              <a href="#top">Back to top</a>
            </span>
            
            <p>Generated by <strong>DocFX</strong> | Developed with <span style="color:red">❤</span> at <a href="https://www.mts.sk/en">MTS</a> - putting the heart into manufacturing.</p>
          </div>
        </div>
      </footer>
    </div>
    
    <script type="text/javascript" src="../../../../styles/docfx.vendor.js"></script>
    <script type="text/javascript" src="../../../../styles/docfx.js"></script>
    <script type="text/javascript" src="../../../../styles/main.js"></script>
  </body>
</html>
